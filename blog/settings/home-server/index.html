<!doctype html><html itemscope lang=ko-kr itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=5"><meta name=theme-name content="hugoplate"><meta name=naver-site-verification content="d4d26f3ed3d3a269e15a545d23cb4b736e12d34a"><link rel="shortcut icon" href=/images/favicon_hu2575224fe8b7f0ea91e8825e42ecaf67_1499445_96x0_resize_lanczos_3.png type=image/x-icon><link rel=icon href=/images/favicon_hu2575224fe8b7f0ea91e8825e42ecaf67_1499445_96x0_resize_lanczos_3.png type=image/x-icon><link rel=icon type=image/png sizes=48x48 href=/images/favicon_hu2575224fe8b7f0ea91e8825e42ecaf67_1499445_48x0_resize_lanczos_3.png><link rel=icon type=image/png sizes=96x96 href=/images/favicon_hu2575224fe8b7f0ea91e8825e42ecaf67_1499445_96x0_resize_lanczos_3.png><link rel=apple-touch-icon sizes=144x144 href=/images/favicon_hu2575224fe8b7f0ea91e8825e42ecaf67_1499445_144x0_resize_lanczos_3.png><link rel=manifest href=/manifest.webmanifest><meta name=msapplication-TileColor content="#ddd"><meta name=theme-color content="#ffffff"><base href=https://gowoonsori.com/blog/settings/home-server/><title>Home Server 만들기</title>
<meta name=generator content="Hugo 0.120.2"><meta name=keywords content="Gromit,Tech,Blog,gowoonsori"><meta name=description content="집에 있던 남은 부품들로 집 서버 구축해보고 경험들을 기록한 글"><meta name=author content="gowoonsori"><meta property="og:image" content="https://gowoonsori.com/images/image-placeholder.png"><meta name=twitter:image content="https://gowoonsori.com/images/image-placeholder.png"><meta name=twitter:card content="summary
            _large_image
          "><meta property="og:image:width" content="1096"><meta property="og:image:height" content="480"><meta property="og:image:type" content="image/
        .png
      "><meta property="og:title" content="Home Server 만들기"><meta property="og:description" content="집에 있던 남은 부품들로 집 서버 구축해보고 경험들을 기록한 글"><meta property="og:type" content="website"><meta property="og:url" content="https://gowoonsori.com/blog/settings/home-server/"><meta name=twitter:title content="Home Server 만들기"><meta name=twitter:description content="집에 있던 남은 부품들로 집 서버 구축해보고 경험들을 기록한 글"><script async src="https://www.googletagmanager.com/gtag/js?id=G-NB8ZZY0RDG"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-NB8ZZY0RDG",{anonymize_ip:!1})}</script><script>!function(){let e=0;document.addEventListener("mousemove",function(){1==++e&&gtmLoader()}),window.onscroll=function(){1==++e&&gtmLoader()},setTimeout(function(){0===e&&(e++,gtmLoader())},5e3)}();function gtmLoader(){(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","G-NB8ZZY0RDG")}</script><script>let indexURL="https://gowoonsori.com/searchindex.json",includeSectionsInSearch=["blog"],no_results_for="No results for",empty_search_results_placeholder="Type something to search.."</script><meta http-equiv=x-dns-prefetch-control content="on"><link rel=preconnect href=https://use.fontawesome.com crossorigin><link rel=preconnect href=//cdnjs.cloudflare.com><link rel=preconnect href=//www.googletagmanager.com><link rel=preconnect href=//www.google-analytics.com><link rel=dns-prefetch href=https://use.fontawesome.com><link rel=dns-prefetch href=//ajax.googleapis.com><link rel=dns-prefetch href=//cdnjs.cloudflare.com><link rel=dns-prefetch href=//www.googletagmanager.com><link rel=dns-prefetch href=//www.google-analytics.com><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//connect.facebook.net><link rel=dns-prefetch href=//platform.linkedin.com><link rel=dns-prefetch href=//platform.twitter.com><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;600&family=Signika:wght@500;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><link href="/css/style.min.7f79edb8cd8b89cf1fa077c3ef1fc27c23db7dbf0f36180213e0101f52c366f2.css" integrity="sha256-f3ntuM2Lic8foHfD7x/CfCPbfb8PNhgCE+AQH1LDZvI=" rel=stylesheet><link rel=stylesheet href="/css/style-lazy.min.6ebccd46bdfd6a8861cd49c725f28b8615081591f753245c453e861a11c4b5b4.css" integrity="sha256-brzNRr39aohhzUnHJfKLhhUIFZH3UyRcRT6GGhHEtbQ=" media=print onload='this.media="all",this.onload=null'></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=G-NB8ZZY0RDG" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><header class="header sticky top-0 z-30"><nav class="navbar container"><div class=order-0><a class="navbar-brand block" href=/><img fetchpriority=high decoding=async class="img logo-light" width=160 height=32 src=/images/logo_huecbda5afdfa6f2a47d87fa44d8964534_89529_320x0_resize_q90_h2_lanczos_3.webp alt=Gromit.Blog onerror='this.onerror=null,this.src="/images/logo_huecbda5afdfa6f2a47d87fa44d8964534_89529_320x0_resize_lanczos_3.png"'>
<img fetchpriority=high decoding=async class="img logo-dark" width=160 height=32 src=/images/logo-darkmode_hu2877729f4be0141a60f84355100d8d94_80775_320x0_resize_q90_h2_lanczos_3.webp alt=Gromit.Blog onerror='this.onerror=null,this.src="/images/logo-darkmode_hu2877729f4be0141a60f84355100d8d94_80775_320x0_resize_lanczos_3.png"'></a></div><input id=nav-toggle type=checkbox class=hidden>
<label for=nav-toggle class="order-3 cursor-pointer flex items-center lg:hidden text-dark dark:text-white lg:order-1"><svg id="show-button" class="h-6 fill-current block" viewBox="0 0 20 20"><title>Menu Open</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0V0z"/></svg><svg id="hide-button" class="h-6 fill-current hidden" viewBox="0 0 20 20"><title>Menu Close</title><polygon points="11 9 22 9 22 11 11 11 11 22 9 22 9 11 -2 11 -2 9 9 9 9 -2 11 -2" transform="rotate(45 10 10)"/></svg></label><ul id=nav-menu class="navbar-nav order-3 hidden lg:flex w-full pb-6 lg:order-1 lg:w-auto lg:space-x-2 lg:pb-0 xl:space-x-8"><li class=nav-item><a class=nav-link href=/blog/>Blog</a></li><li class=nav-item><a class=nav-link href=/categories/>Categories</a></li><li class=nav-item><a class=nav-link href=/tags/>Tags</a></li><li class=nav-item><a class=nav-link href=/about>About</a></li></ul><div class="order-1 ml-auto flex items-center md:order-2 lg:ml-0"><button aria-label=search class="border-border text-dark hover:text-primary dark:border-darkmode-border mr-5 inline-block border-r pr-5 text-xl dark:text-white" data-target=search-modal>
<i class="fa-solid fa-search"></i></button><div class="theme-switcher mr-5"><input id=theme-switcher data-theme-switcher type=checkbox>
<label for=theme-switcher><span class=sr-only>theme switcher</span>
<span><svg class="absolute left-[4px] top-[4px] z-10 opacity-100 dark:opacity-0" viewBox="0 0 56 56" fill="#fff" height="16" width="16"><path d="M30 4.6c0-1-.9-2-2-2a2 2 0 00-2 2v5c0 1 .9 2 2 2s2-1 2-2zm9.6 9a2 2 0 000 2.8c.8.8 2 .8 2.9.0L46 13a2 2 0 000-2.9 2 2 0 00-3 0zm-26 2.8c.7.8 2 .8 2.8.0.8-.7.8-2 0-2.9L13 10c-.7-.7-2-.8-2.9.0-.7.8-.7 2.1.0 3zM28 16A12 12 0 0016 28a12 12 0 0012 12 12 12 0 0012-12A12 12 0 0028 16zm23.3 14c1.1.0 2-.9 2-2s-.9-2-2-2h-4.9a2 2 0 00-2 2c0 1.1 1 2 2 2zM4.7 26a2 2 0 00-2 2c0 1.1.9 2 2 2h4.9c1 0 2-.9 2-2s-1-2-2-2zm37.8 13.6a2 2 0 00-3 0 2 2 0 000 2.9l3.6 3.5a2 2 0 002.9.0c.8-.8.8-2.1.0-3zM10 43.1a2 2 0 000 2.9c.8.7 2.1.8 3 0l3.4-3.5c.8-.8.8-2.1.0-2.9s-2-.8-2.9.0zm20 3.4c0-1.1-.9-2-2-2a2 2 0 00-2 2v4.9c0 1 .9 2 2 2s2-1 2-2z"/></svg><svg class="absolute left-[4px] top-[4px] z-10 opacity-0 dark:opacity-100" viewBox="0 0 24 24" fill="none" height="16" width="16"><path fill="#000" fill-rule="evenodd" clip-rule="evenodd" d="M8.2 2.2c1-.4 2 .6 1.6 1.5-1 3-.4 6.4 1.8 8.7a8.4 8.4.0 008.7 1.8c1-.3 2 .5 1.5 1.5v.1A10.3 10.3.0 0112.4 22 10.3 10.3.0 013.2 6.7c1-2 2.9-3.5 4.9-4.4z"/></svg></span></label></div><script>var darkMode=!1,themeSwitch;window.matchMedia("(prefers-color-scheme: dark)").matches&&(darkMode=!0),localStorage.getItem("theme")==="dark"?darkMode=!0:localStorage.getItem("theme")==="light"&&(darkMode=!1),darkMode&&document.documentElement.classList.toggle("dark"),themeSwitch=document.querySelectorAll("[data-theme-switcher]"),document.addEventListener("DOMContentLoaded",()=>{[].forEach.call(themeSwitch,function(e){e.checked=!!darkMode,e.addEventListener("click",()=>{document.documentElement.classList.toggle("dark"),localStorage.setItem("theme",document.documentElement.classList.contains("dark")?"dark":"light"),setGiscusTheme()})})});function getGiscusTheme(){return localStorage.getItem("theme")==="dark"?"dark":"light"}function setGiscusTheme(){function e(e){const t=document.querySelector("iframe.giscus-frame");if(!t)return;t.contentWindow.postMessage({giscus:e},"https://giscus.app")}e({setConfig:{theme:getGiscusTheme()}})}</script></div></nav></header><div class="search-wrapper search-modal" data-image=true data-description=true data-tags=true data-categories=true tabindex=-1 aria-hidden=true style=--color-primary:#121212><div class=search-wrapper-content><div class=search-input-body><label for=search-modal-input style=margin-top:-1px><span class=sr-only>search icon</span>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" height="18" width="18" class="search-icon" data-type="search"><path fill="currentcolor" d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8.0 45.3s-32.8 12.5-45.3.0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9.0 208S93.1.0 208 0 416 93.1 416 208zM208 352a144 144 0 100-288 144 144 0 100 288z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" height="18" width="18" class="search-reset" data-type="reset"><path fill="currentcolor" d="M256 512A256 256 0 10256 0a256 256 0 100 512zM175 175c9.4-9.4 24.6-9.4 33.9.0l47 47 47-47c9.4-9.4 24.6-9.4 33.9.0s9.4 24.6.0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6.0 33.9s-24.6 9.4-33.9.0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9.0s-9.4-24.6.0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6.0-33.9z"/></svg></label><input id=search-modal-input type=text data-search-input autocomplete=off aria-label=Search placeholder="Search Post ..."></div><div class=search-wrapper-body><div class=search-result data-search-result></div><span class=search-result-empty>Type something to search..</span></div><div class=search-wrapper-footer><span><kbd><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentcolor" style="margin-top:-2px" viewBox="0 0 16 16"><path d="M3.204 11h9.592L8 5.519 3.204 11zm-.753-.659 4.796-5.48a1 1 0 011.506.0l4.796 5.48c.566.647.106 1.659-.753 1.659H3.204a1 1 0 01-.753-1.659z"/></svg></kbd><kbd><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentcolor" style="margin-top:1px" viewBox="0 0 16 16"><path d="M3.204 5h9.592L8 10.481 3.204 5zm-.753.659 4.796 5.48a1 1 0 001.506.0l4.796-5.48c.566-.647.106-1.659-.753-1.659H3.204a1 1 0 00-.753 1.659z"/></svg></kbd>to navigate
</span><span><kbd><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentcolor" style="display:inline-block" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M14.5 1.5a.5.5.0 01.5.5v4.8a2.5 2.5.0 01-2.5 2.5H2.707l3.347 3.346a.5.5.0 01-.708.708l-4.2-4.2a.5.5.0 010-.708l4-4a.5.5.0 11.708.708L2.707 8.3H12.5A1.5 1.5.0 0014 6.8V2a.5.5.0 01.5-.5z"/></svg></kbd>to select
</span><span class=search-result-info></span>
<span data-target=close-search-modal><kbd>ESC</kbd> to close</span></div></div></div><main><section class="section pt-7"><div class=container><div class="row justify-center"><article class=lg:col-10><h1 class="h2 mb-4">Home Server 만들기</h1><ul class=mb-4><li class="mr-4 inline-block"><i class="fa-regular fa-folder mr-2"></i>
<a href=/categories/settings/ class=ms-1>Settings</a></li><li class="mr-4 inline-block"><i class="fa-regular fa-clock mr-2"></i>
2022년 2월 4일</li></ul><div class="content mb-10 mt-9"><h2 id=집-서버를-만들게-된-배경>집 서버를 만들게 된 배경</h2><p>집 컴퓨터를 교체하고 지인의 컴퓨터를 교체해주면서 부품들이 여럿 남게 되는 상황이 생겼는데, 그냥 버리기 아까워 컴퓨터를 한대 더 조립을 하게 되었다. 사양은 <strong>Intel(R) Celeron(R) CPU G3930</strong> 에 <strong>4G</strong>, <strong>250Gb</strong> 이다.</p><p>컴퓨터를 조립 후 막상 사용할 곳이 없어 고민하던 중에 aws 프리티어도 끝났겠다 싶어 개발이나 테스트용으로 서버를 사용하면 좋을 것 같아 서버로 만들어보기로 했다.</p><br><h2 id=1-os-설치>1. OS 설치</h2><p>OS로는 aws에서도 사용했었던 <strong>Ubuntu Server20.04 LTS</strong> 로 설치하기로 했고 그에 맞춰 굴러다니던 usb를 이용해 부팅usb로 만들어 주었다.</p><ul><li><a href=https://ubuntu.com/download/server target=_blank>OS iso 다운(공식 홈페이지)</a></li><li><a href=https://rufus.ie/ko/ target=_blank>부팅 usb만드는 프로그램(Rufus)</a></li></ul><p>위의 홈페이지에서 iso파일과 Rufus파일을 다운받을 수 있고, Rufus프로그램에 iso를 등록하여 usb를 부팅usb로 쉽게 만들 수 있다. 이렇게 만들어진 usb를 이용해 os를 설치 해주자!</p><br><h2 id=2-인터넷-설정>2. 인터넷 설정</h2><p>집 구조상 내방까지 인터넷선을 끌어오면 굉장히 보기 안좋아지기 때문에 내방의 컴퓨터는 wifi를 이용하고 있다. 서버를 거실에 둘 수도 없기 때문에 서버에 무선랜카드를 추가하여 wifi를 잡도록 설정해야 한다.</p><p>서버에 사용한 랜카드는 <strong>iptime A3000U</strong>모델이다. 랜카드를 꽂게 되면 서버는 해당 랜카드를 인식하지 못한다. <strong>iwconfig</strong>명령어를 입력하면 무선 인터페이스가 없는 것을 확인할 수 있다.</p><h3 id=1-a3000u-드라이버-설치>1) A3000U 드라이버 설치</h3><p>A3000U는 <strong>리얼텍 RTL8812BU</strong> 칩셋을 이용하고 있고 이 칩셋은 리눅스 커널에서 지원을 하지 않기 때문에 별도로 드라이버를 설치해주어야 한다. 이때 공식홈페이지에는 별도의 드라이버 파일이 존재하지 않기 때문에 github의 올라와있는 <a href=https://github.com/RinCat/RTL88x2BU-Linux-Driver target=_blank>프로젝트</a>
를 이용해 설치 해주면 된다.</p><p>서버에 무선랜카드만 꼽았다면 인터넷이 되지 않기 때문에 따로 인터넷을 연결해준 뒤 설치해야 한다.</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#7f848e># git clone</span>
</span></span><span style=display:flex><span>$ git clone https://github.com/RinCat/RTL88x2BU-Linux-Driver
</span></span><span style=display:flex><span>$ <span style=color:#e5c07b>cd</span> RTL88x2BU-Linux-Driver
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#7f848e># driver compile tools</span>
</span></span><span style=display:flex><span>$ sudo apt-get install build-essential dkms
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#7f848e># compile</span>
</span></span><span style=display:flex><span>$ make clean <span style=color:#56b6c2>&amp;&amp;</span> make
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#7f848e># install</span>
</span></span><span style=display:flex><span>$ sudo make install
</span></span></code></pre></div><p>그리고 iwconfig를 입력해보면 랜카드가 잡힌 것을 볼 수 있다.</p><img title="image title" loading=lazy decoding=async class="img img-fluid img-center" width=632 height=184 src=/images/settings/home-server/wlan_hud12ad068c60d1014b26e71681070337e_16341_632x184_fill_q100_lanczos_smart1_3.png alt=alter-text onerror='this.onerror="null",this.src="/images/settings/home-server/wlan_hud12ad068c60d1014b26e71681070337e_16341_632x184_fill_q100_lanczos_smart1_3.png"'>
<script>window.addEventListener("load",e=>{const t=GLightbox()})</script><p>만일 Nickname 옆에 disalbed가 존재하면 활성화가 되지 않은 상태로 <strong>ifconfig 무선인터페이스명 up</strong> 을 통해 활성화 해주면 된다. 이때 무선 인터페이스명은 <strong>iwconfig</strong>나, <strong>sudo lshw -C Network</strong>로 확인할 수 있다.</p><p>나같은 경우는 <strong>wlx705dccfa5cb4</strong> 가 무선인터페이스명 이고 <strong>ifconfig wlx705dccfa5cb4 up</strong>을 입력하면 된다.</p><h3 id=2-wpa-프로그램-설치>2) WPA 프로그램 설치</h3><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ sudo apt install wpasupplicant -y
</span></span></code></pre></div><h3 id=3-wifi-설정>3) wifi 설정</h3><p>ubuntu 20 전에는 <strong>sudo vi /etc/network/interfaces</strong> 를 이용하여 정의 해주었었는데 20에서는 netplan을 통해 yaml파일로 정의해주면 된다.</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#7f848e># vi로 yaml open</span>
</span></span><span style=display:flex><span>sudo vi /etc/netplan/00-installer-config.yaml
</span></span></code></pre></div><p>다른 블로그들을 보면 **00-installer..**이 아닌 <strong>50-installer-&mldr;</strong> 인 경우가 존재하는데 개인 마다 파일명은 다를 수 있는 것 같다. netplan/ 까지 입력후 tab을 이용하여 존재하는 파일을 열면 된다.</p><p>만일 존재하지 않는다면 <strong>sudo netplan generate</strong> 으로 생성해주면 된다.</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#e06c75>network</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>ethernets</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>enp2s0</span>:
</span></span><span style=display:flex><span>      <span style=color:#e06c75>dhcp4</span>: <span style=color:#e5c07b>true</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>version</span>: <span style=color:#d19a66>2</span>
</span></span><span style=display:flex><span>  <span style=color:#7f848e># 아랫 부분을 추가해주면 된다.</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>wifis</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>무선인터페이스명</span>:
</span></span><span style=display:flex><span>      <span style=color:#e06c75>addresses</span>: [<span style=color:#d19a66>192.168.0.142</span>/24]
</span></span><span style=display:flex><span>      <span style=color:#e06c75>gateway4</span>: <span style=color:#d19a66>192.168.0.1</span>
</span></span><span style=display:flex><span>      <span style=color:#e06c75>nameservers</span>:
</span></span><span style=display:flex><span>        <span style=color:#e06c75>addresses</span>: [<span style=color:#d19a66>8.8.8.8</span>, <span style=color:#d19a66>8.8.4.4</span>]
</span></span><span style=display:flex><span>      <span style=color:#e06c75>optional</span>: <span style=color:#e5c07b>true</span>
</span></span><span style=display:flex><span>      <span style=color:#e06c75>access-points</span>:
</span></span><span style=display:flex><span>        <span style=color:#98c379>&#34;wifi 명&#34;</span>:
</span></span><span style=display:flex><span>          <span style=color:#e06c75>password</span>: <span style=color:#98c379>&#34;wifi 비밀번호&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#e06c75>dhcp</span>: <span style=color:#e5c07b>false</span>
</span></span></code></pre></div><p>이때 공유기의 포트포워딩 기능을 이용하여 외부에서 접속을 할 수 있도록 해줄 건데 dhcp를 이용한다면 매번 ip가 바뀔 수 있기 때문에 고정 ip로 설정해주었다.</p><h3 id=4-설정-적용>4) 설정 적용</h3><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#7f848e># apply</span>
</span></span><span style=display:flex><span>sudo netplan apply
</span></span></code></pre></div><h3 id=5-설정-확인>5) 설정 확인</h3><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#7f848e># ip 확인</span>
</span></span><span style=display:flex><span>ip addr
</span></span><span style=display:flex><span>ip route
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#7f848e># ping, nslookup 이용해 인터넷동작 확인</span>
</span></span><span style=display:flex><span>nslookup google.com
</span></span><span style=display:flex><span>ping google.com
</span></span></code></pre></div><br><h2 id=3-포트포워딩과-ddns>3. 포트포워딩과 DDNS</h2><p>공유기로 iptime를 이용하고 있다면 <strong>192.168.0.1</strong>에 접속하여 네트워크 설정을 해줄 수 있다.</p><img title="image title" loading=lazy decoding=async class="img img-fluid img-center" width=864 height=420 src=/images/settings/home-server/portfoward_hu8a690afcb39bf24613a18a5f73bbcf3d_29242_864x420_fill_q100_lanczos_smart1_3.png alt=alter-text onerror='this.onerror="null",this.src="/images/settings/home-server/portfoward_hu8a690afcb39bf24613a18a5f73bbcf3d_29242_864x420_fill_q100_lanczos_smart1_3.png"'><p>ssh 접속을 위해 22, http를 위해 80,443번 이렇게 3개의 포트포워딩 규칙을 추가해 주었다.</p><img title="image title" loading=lazy decoding=async class="img img-fluid img-center" width=818 height=253 src=/images/settings/home-server/ddns_hubf2aa9dc969bf22f7abca02fe385fefe_15625_818x253_fill_q100_lanczos_smart1_3.png alt=alter-text onerror='this.onerror="null",this.src="/images/settings/home-server/ddns_hubf2aa9dc969bf22f7abca02fe385fefe_15625_818x253_fill_q100_lanczos_smart1_3.png"'><p>또한, ip를 이용하여 접속하기에 ip를 외우기도 어렵고 ip가 몇개월마다 주기적으로 바뀌기 때문에 그때마다 확인하기 어려울 수 있다. 이때 ddns 서비스를 이용하면 항상 같은 도메인으로 연결할 수 있다.</p><br><h2 id=4-연결-확인>4. 연결 확인</h2><p>다른 컴퓨터나 어플을 이용하여 ssh접속을 한번 해보자!</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ ssh 서버접속사용자명@ddns호스트이름 -p <span style=color:#d19a66>5555</span>
</span></span></code></pre></div><p>접속이 잘 되었다면 끝이다! 만일 접속이 안된다면 ssh가 설치가 되었는지 확인하고 방화벽에서도 허용되었는지 확인 해보자.</p><p><br><br></p><h2 id=5-추가-설정>5. 추가 설정</h2><h3 id=1-ssh-key-설정>1) ssh-key 설정</h3><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#7f848e># 외부에서 ssh-key 생성</span>
</span></span><span style=display:flex><span>$ ssh-keygen -t rsa -C <span style=color:#98c379>&#34;description 작성&#34;</span>
</span></span><span style=display:flex><span>Generating public/private rsa key pair.
</span></span><span style=display:flex><span>Enter file in which to save the key <span style=color:#56b6c2>(</span>/Users/ssun/.ssh/id_rsa<span style=color:#56b6c2>)</span>: <span style=color:#98c379>&#34;키 파일명&#34;</span>
</span></span><span style=display:flex><span>Enter passphrase <span style=color:#56b6c2>(</span>empty <span style=color:#c678dd>for</span> no passphrase<span style=color:#56b6c2>)</span>: <span style=color:#7f848e>#비밀번호</span>
</span></span><span style=display:flex><span>Enter same passphrase again:
</span></span></code></pre></div><p>위 명령어를 통해 ssh-key를 생성할 수 있고 이 때 <strong>키 파일명</strong>, <strong>키 파일명.pub</strong> 파일 두개가 생성된다. <strong>.pub</strong> 은 공개키이며 다른 한개의 파일은 비밀키이다.</p><p>공개키를 server안으로 복사하여 이동시키자.</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#e5c07b>cd</span> ~
</span></span><span style=display:flex><span>mkdir .ssh
</span></span><span style=display:flex><span><span style=color:#e5c07b>cd</span> .ssh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#7f848e># .pub파일 해당 폴더에 이동후 파일명 변경</span>
</span></span><span style=display:flex><span>mv 파일명.pub authorized_keys
</span></span></code></pre></div><p>위처럼 파일명을 변경하거나 vi 편집기를 통해 authroized_keys를 새로 만들고 안에 .pub의 내용을 붙여넣어주면 된다.</p><h4 id=접속확인>접속확인</h4><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>ssh -i 비밀키명 gowoonsori@ddns명 -p5555
</span></span></code></pre></div><p>접속이 잘되었다면 성공이다! 이 후 나는 비밀번호 로그인을 허용하지 않도록 설정도 바꾸어 주었다.</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#7f848e># config open</span>
</span></span><span style=display:flex><span>sudo vi /etc/ssh/sshd_config
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#7f848e># config 내용중 마지막 부분중 PasswordAuthentication을 no로 바꿔주자</span>
</span></span><span style=display:flex><span><span style=color:#7f848e># PasswordAuthentication yes</span>
</span></span><span style=display:flex><span>PasswordAuthentication no
</span></span></code></pre></div><br><h3 id=2-원격-부팅종료>2) 원격 부팅/종료</h3><p>현재 서버를 개발이나 테스트용으로 사용하다보니 항상 서버가 켜져있을 필요가 없으며 조금이라도 전기세를 막고자 원격으로 부팅과 종료를 할 수 있도록 설정해주었다.</p><p>서버를 원격으로 종료시키는 건 쉽지만 부팅이 문제였는데 WOL기능을 이용하면 원격으로 킬 수 있겠지만 서버를 무선으로 작업을 했기 때문에 WOL을 사용은 할 수 없었다.</p><p>고민 끝에 바이오스의 전원공급시 자동부팅 기능을 활용하기로 했다. 우선 어플을 이용해서 원격으로 전원을 공급/차단할 수 있는 플러그를 구매했다.<br>네이버에 스마트 플러그라고 검색하면 많은 제품이 검색되지만 가격이 꽤 나가기에 나는 알리에서 7천원대로 구매를 하여 설치했다.</p><p>그후에 서버 바이오스에 들어가 자동 부팅기능을 활성화해주어야 하는데 이는 메인보드 제조사마다 부르는 기능명도 다르고 설정방법도 조금씩 다르기에 본인의 메인보드에 맞게 설정해주면 된다.</p><h4 id=제조사별-명칭>제조사별 명칭</h4><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span># ASUS
</span></span><span style=display:flex><span>Resotre ac power loss
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># ASROCK
</span></span><span style=display:flex><span>AC/Poser loss (advanced에 존재)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># MSI
</span></span><span style=display:flex><span>Resotre after AC Power loss (advanced에 존재)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># GigaByte
</span></span><span style=display:flex><span>AC BACK (Power에 존재)
</span></span></code></pre></div><p>이로써 외부에서 원격으로 서버를 부팅시킬 수 있게 되었다!</p><p><br><br><br></p><hr><h2 id=reference>Reference</h2><ul><li><a href=https://github.com/RinCat/RTL88x2BU-Linux-Driver target=_blank>무선랜 드라이버 설치</a></li><li><a href=https://www.lesstif.com/lpt/ubuntu-netplan-ip-static-ip-config-61899302.html target=_blank>고정 ip 설정</a></li></ul></div><div class="row items-start justify-between mt-24"><div class="lg:col-5 mb-10 flex items-center lg:mb-0"><h5 class=mr-3>Tags :</h5><ul><li class=inline-block><a class="bg-theme-light hover:bg-primary dark:bg-darkmode-theme-light dark:hover:bg-darkmode-primary dark:hover:text-dark m-1 block rounded px-3 py-1 hover:text-white" href=/tags/server/>Server</a></li><li class=inline-block><a class="bg-theme-light hover:bg-primary dark:bg-darkmode-theme-light dark:hover:bg-darkmode-primary dark:hover:text-dark m-1 block rounded px-3 py-1 hover:text-white" href=/tags/home-server/>Home server</a></li></ul></div><div class="lg:col-5 flex items-center"><div class=share-icons><h5 class=share-title>Share :</h5><a class="share-link share-facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fgowoonsori.com%2fblog%2fsettings%2fhome-server%2f" target=_blank rel=noopener aria-label="share facebook"><span class=share-icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg></span></a><a class="share-link share-twitter" href="https://twitter.com/intent/tweet/?text=Share&amp;url=https%3a%2f%2fgowoonsori.com%2fblog%2fsettings%2fhome-server%2f" target=_blank rel=noopener aria-label="share twitter"><span aria-hidden=true class=share-icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5.0-4.55 2.04-4.55 4.54.0.36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3.0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35.0 12.92-6.92 12.92-12.93.0-.2.0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg></span></a><a class="share-link share-email" href="mailto:?subject=Share&amp;body=https%3a%2f%2fgowoonsori.com%2fblog%2fsettings%2fhome-server%2f" target=_self rel=noopener aria-label="share email"><span aria-hidden=true class=share-icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 4H2C.9 4 0 4.9.0 6v12c0 1.1.9 2 2 2h20c1.1.0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17.0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1.0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08.0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z"/></svg></span></a><a class="share-link share-reddit" href="https://reddit.com/submit/?url=https%3a%2f%2fgowoonsori.com%2fblog%2fsettings%2fhome-server%2f&amp;resubmit=true&amp;title=Share" target=_blank rel=noopener aria-label="share reddit"><span aria-hidden=true class=share-icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 11.5c0-1.65-1.35-3-3-3-.96.0-1.86.48-2.42 1.24-1.64-1-3.75-1.64-6.07-1.72.08-1.1.4-3.05 1.52-3.7.72-.4 1.73-.24 3 .5C17.2 6.3 18.46 7.5 20 7.5c1.65.0 3-1.35 3-3s-1.35-3-3-3c-1.38.0-2.54.94-2.88 2.22-1.43-.72-2.64-.8-3.6-.25-1.64.94-1.95 3.47-2 4.55-2.33.08-4.45.7-6.1 1.72C4.86 8.98 3.96 8.5 3 8.5c-1.65.0-3 1.35-3 3 0 1.32.84 2.44 2.05 2.84-.03.22-.05.44-.05.66.0 3.86 4.5 7 10 7s10-3.14 10-7c0-.22-.02-.44-.05-.66 1.2-.4 2.05-1.54 2.05-2.84zM2.3 13.37C1.5 13.07 1 12.35 1 11.5c0-1.1.9-2 2-2 .64.0 1.22.32 1.6.82-1.1.85-1.92 1.9-2.3 3.05zm3.7.13c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9.8 4.8c-1.08.63-2.42.96-3.8.96-1.4.0-2.74-.34-3.8-.95-.24-.13-.32-.44-.2-.68.15-.24.46-.32.7-.18 1.83 1.06 4.76 1.06 6.6.0.23-.13.53-.05.67.2.14.23.06.54-.18.67zm.2-2.8c-1.1.0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm5.7-2.13c-.38-1.16-1.2-2.2-2.3-3.05.38-.5.97-.82 1.6-.82 1.1.0 2 .9 2 2 0 .84-.53 1.57-1.3 1.87z"/></svg></span></a></div></div></div><div class=mt-16 id=giscusContainer><script>document.addEventListener("DOMContentLoaded",function(){const t={src:"https://giscus.app/client.js","data-repo":"gowoonsori/blog-comments","data-repo-id":"MDEwOlJlcG9zaXRvcnkyOTc4MTY3NDc=","data-category":"Comments","data-category-id":"DIC_kwDOEcBSq84CVvNv","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"1","data-input-position":"top","data-theme":getGiscusTheme(),"data-lang":"ko",crossorigin:"anonymous","data-loading":"lazy",async:""},e=document.createElement("script");Object.entries(t).forEach(([t,n])=>e.setAttribute(t,n)),document.getElementById("giscusContainer").appendChild(e)})</script></div></article></div><div class="section pb-0 pt-32"><h2 class="h3 mb-12">Related Posts</h2><div class=row><div class="lg:col-4 mb-16"><div class="bg-body dark:bg-darkmode-body"><a href=/blog/golang/operator/><img src=/images/golang/golang.png alt=연산자 class="mb-6 w-full rounded preview" width=392 height=172></a><h4 class=mb-3><a href=/blog/golang/operator/ class=title>연산자</a></h4><ul class=mb-4><li class="mr-4 inline-block"><i class="fa-regular fa-folder mr-2"></i>
<a href=/categories/golang/ class=ms-1>Golang</a></li><li class="mr-4 inline-block"><i class="fa-regular fa-clock mr-2"></i>
2021년 5월 28일</li></ul><p class="mb-6 excerpt">1. 산술 연산자 구분 연산자 연산 피연산자 타입 사칙 연산과 나머지 + 덧셈 정수, 실수, 복소수, 문자열 - 뺄셈 정수, 실수, 복소수 * 곱셈 정수, 실수, 복소수 / 나눗셈 정수, 실수, 복소수 % 나머지 정수, 실수, 복소수 비트 연산 & AND 비트연산 정수 | OR비트 연산 정수 ^ XOR비트 연산 정수 &^ 비트 클리어 정수 시프트 연산 &#171; 왼쪽 시프트 정수 &#171; 양의 정수...</p><a class="btn btn-outline-primary btn-sm" href=/blog/golang/operator/>Read More</a></div></div><div class="lg:col-4 mb-16"><div class="bg-body dark:bg-darkmode-body"><a href=/blog/golang/module-package/><img src=/images/golang/golang.png alt="모듈과 패키지" class="mb-6 w-full rounded preview" width=392 height=172></a><h4 class=mb-3><a href=/blog/golang/module-package/ class=title>모듈과 패키지</a></h4><ul class=mb-4><li class="mr-4 inline-block"><i class="fa-regular fa-folder mr-2"></i>
<a href=/categories/golang/ class=ms-1>Golang</a></li><li class="mr-4 inline-block"><i class="fa-regular fa-clock mr-2"></i>
2021년 6월 9일</li></ul><p class="mb-6 excerpt">1. 모듈의 변천과정 Go 1.11 이전 : 모듈 존재 X Go 1.11 : 모듈이 소개되었지만 미완성 Go 1.13 : 모듈 완성 Go 1.16 : 모듈이 이제 기본이 되었다. 1) 모듈 모듈은 패키지의 모음 2) 패키지 패키지는 코드를 묶는 단위로 모든 코드는 반드시 패키지로 묶여야 한다. 우리가 흔히 부르는 프로그램은 다양한 관점에서 의미를 해석할수 있을 텐데 실핼파일 관점에서보면 실행시작 지점을 포...</p><a class="btn btn-outline-primary btn-sm" href=/blog/golang/module-package/>Read More</a></div></div><div class="lg:col-4 mb-16"><div class="bg-body dark:bg-darkmode-body"><a href=/blog/spring/elk/><img src=/images/spring/preview.png alt="Spring boot와 EK스택 연결하기" class="mb-6 w-full rounded preview" width=392 height=172></a><h4 class=mb-3><a href=/blog/spring/elk/ class=title>Spring boot와 EK스택 연결하기</a></h4><ul class=mb-4><li class="mr-4 inline-block"><i class="fa-regular fa-folder mr-2"></i>
<a href=/categories/spring/ class=ms-1>Spring</a></li><li class="mr-4 inline-block"><i class="fa-regular fa-clock mr-2"></i>
2021년 3월 24일</li></ul><p class="mb-6 excerpt">현재 진행하고있는 spring boot 프로젝트에 쿼리 통계를 위해 ElasticSearch와 Kibana를 도입하기로 했고 이에 맞게 로깅방법이나 세팅 방법을 기록하기 위해 글을 작성하게 됬다. diagram 구성은 다음과 같은데 서버로 EC2 프리티어를 사용하고 있어 사양이 안좋기 때문에 서버 내부에 logstash없이 filebeat를 이용하여 로그를 전송하기로...</p><a class="btn btn-outline-primary btn-sm" href=/blog/spring/elk/>Read More</a></div></div></div></div></div></section></main><footer class="bg-theme-light dark:bg-darkmode-theme-light"><div class=container><div class="row items-center py-10"><div class="lg:col-3 mb-8 text-center lg:mb-0 lg:text-left"><a class="navbar-brand inline-block" href=/><img fetchpriority=high decoding=async class="img logo-light" width=160 height=32 src=/images/logo_huecbda5afdfa6f2a47d87fa44d8964534_89529_320x0_resize_q90_h2_lanczos_3.webp alt=Gromit.Blog onerror='this.onerror=null,this.src="/images/logo_huecbda5afdfa6f2a47d87fa44d8964534_89529_320x0_resize_lanczos_3.png"'>
<img fetchpriority=high decoding=async class="img logo-dark" width=160 height=32 src=/images/logo-darkmode_hu2877729f4be0141a60f84355100d8d94_80775_320x0_resize_q90_h2_lanczos_3.webp alt=Gromit.Blog onerror='this.onerror=null,this.src="/images/logo-darkmode_hu2877729f4be0141a60f84355100d8d94_80775_320x0_resize_lanczos_3.png"'></a></div><div class="lg:col-6 mb-8 text-center lg:mb-0"><ul></ul></div><div class="lg:col-3 mb-8 text-center lg:mb-0 lg:mt-0 lg:text-right"><ul class=social-icons><li><a target=_blank aria-label=github rel="nofollow noopener" href=https://www.github.com/gowoonsori><i class="fab fa-github"></i></a></li><li><a target=_blank aria-label=linkedin rel="nofollow noopener" href=https://www.linkedin.com/gowoonsori><i class="fab fa-linkedin"></i></a></li><li><a target=_blank aria-label=google rel="nofollow noopener" href=mailto:gowoonsori97@gmail.com><i class="fa-brands fa-google"></i></a></li></ul></div></div></div><div class="border-border dark:border-darkmode-border border-t py-7"><div class="text-light dark:text-darkmode-light container text-center"><p>Developed by <a href=https://github.com/gowoonsori target=_blank>gowoonsori</a></p></div></div></footer><script crossorigin=anonymous integrity="sha256-9XjLB273Xjrt3cq3LF2zQa+fq0rSKxgrV0Hgs1nCeBY=" src=/js/script.min.f578cb076ef75e3aedddcab72c5db341af9fab4ad22b182b5741e0b359c27816.js></script><script crossorigin=anonymous integrity="sha256-B6xkgfh/Kvqv5KhwfzCl2bDxX83d75UmDJHTJqlOs3M=" src=/js/script-lazy.min.07ac6481f87f2afaafe4a8707f30a5d9b0f15fcdddef95260c91d326a94eb373.js defer></script><script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js")</script><script>const path=window.location.pathname;path.match(/^\/algorithm.*/)?window.location.replace(`/blog${path}`.replace("algorithm","algorithms")):path.match(/^\/data-structure.*/)?window.location.replace(`/blog${path}`.replace("data-structure","datastructure").replace("tree/","")):path.match(/^\/java\/listtoarray_arraytolist.*/)?window.location.replace("/blog/java/list-array"):path.match(/^\/go.*/)?window.location.replace(`/blog${path}`.replace("/go","/golang")):path.match(/^\/(java|projects|settings|spring|error).*/)&&window.location.replace(`/blog${path}`)</script></body></html>